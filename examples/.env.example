# ==============================================
# OpenAkita 环境变量模板（用于“手动部署 / 服务器部署”）
#
# - Setup Center（桌面安装中心）会在工作区内自动生成 `.env`，
#   并且只写入你实际填写/修改过的键（可选项不填就不会落盘）。
# - 手动部署时：复制此文件为 `.env`，按需填写即可。
#
# 用法：
#   cp examples/.env.example .env
# ==============================================

# ========== Anthropic 官方 API（可选） ==========
# 仅当你要直连 Anthropic 官方（base_url=https://api.anthropic.com）时才需要配置。
ANTHROPIC_API_KEY=
ANTHROPIC_BASE_URL=https://api.anthropic.com

# 模型配置（可选）
DEFAULT_MODEL=claude-opus-4-5-20251101-thinking
MAX_TOKENS=8192

# ========== 备用 LLM 端点（可选） ==========
# 注意：推荐使用 data/llm_endpoints.json 进行多端点配置。
# 下列环境变量通常会被 llm_endpoints.json 的 api_key_env 引用。

# 云雾AI中转（统一 Key，供 yunwu-* 端点使用）
YUNWU_API_KEY=

# Kimi (月之暗面 Moonshot AI)
# 申请地址（中国区）: https://platform.moonshot.cn/console
# 申请地址（国际区）: https://platform.moonshot.ai/console/api-keys
KIMI_API_KEY=
KIMI_BASE_URL=https://api.moonshot.cn/v1
KIMI_MODEL=kimi-k2.5

# DashScope (阿里云通义)
# 申请地址: https://dashscope.console.aliyun.com/
DASHSCOPE_API_KEY=
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
DASHSCOPE_MODEL=qwen3-max
# 图像生成（Qwen-Image 同步接口，默认北京地域）
DASHSCOPE_IMAGE_API_URL=https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation/generation

# MiniMax
# 申请地址（中国区）: https://platform.minimaxi.com/user-center/basic-information/interface-key
# 申请地址（国际区）: https://platform.minimax.io/user-center/basic-information/interface-key
MINIMAX_API_KEY=
MINIMAX_BASE_URL=https://api.minimaxi.com/v1
MINIMAX_MODEL=MiniMax-M2.1

# DeepSeek
# 申请地址: https://platform.deepseek.com/
DEEPSEEK_API_KEY=

# OpenRouter（聚合多家模型）
# 申请地址: https://openrouter.ai/
OPENROUTER_API_KEY=

# SiliconFlow（开源模型）
# 申请地址: https://siliconflow.cn/
SILICONFLOW_API_KEY=

# ========== Agent 基础（多数用户可不改） ==========
AGENT_NAME=OpenAkita
MAX_ITERATIONS=100
AUTO_CONFIRM=false

# ForceToolCall（工具护栏，可选）
# FORCE_TOOL_CALL_MAX_RETRIES=1

# 工具并行（可选；默认 1=串行更稳）
# TOOL_MAX_PARALLEL=1
# ALLOW_PARALLEL_TOOLS_WITH_INTERRUPT_CHECKS=false

# Thinking 模式（可选）
# THINKING_MODE=auto
# FAST_MODEL=claude-sonnet-4-20250514

# ========== 任务超时策略（可选） ==========
# 无进展超时：连续超过该时间没有任何进展才触发超时处理
# PROGRESS_TIMEOUT_SECONDS=600
# 硬超时兜底（默认关闭=0）
# HARD_TIMEOUT_SECONDS=0

# ========== 数据库 & 日志（可选） ==========
DATABASE_PATH=data/agent.db
LOG_LEVEL=INFO
# LOG_DIR=logs
# LOG_FILE_PREFIX=openakita
# LOG_MAX_SIZE_MB=10
# LOG_BACKUP_COUNT=30
# LOG_RETENTION_DAYS=30
# LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
# LOG_TO_CONSOLE=true
# LOG_TO_FILE=true

# ========== 网络代理（可选） ==========
# HTTP_PROXY=http://127.0.0.1:7890
# HTTPS_PROXY=http://127.0.0.1:7890
# ALL_PROXY=socks5://127.0.0.1:1080
# FORCE_IPV4=false

# ========== 语音识别（可选） ==========
WHISPER_MODEL=base

# ========== GitHub Token（可选） ==========
# 用于 GitHub API（下载 Release、搜索技能等）
# 申请地址: https://github.com/settings/tokens
GITHUB_TOKEN=

# ========== IM 通道 ==========
# 规则：*_ENABLED=true 时，对应密钥通常为“必填”

# --- Telegram ---
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
# 可选：Webhook / 配对
# TELEGRAM_WEBHOOK_URL=
# TELEGRAM_PAIRING_CODE=
# TELEGRAM_REQUIRE_PAIRING=true
# Telegram 代理（大陆环境常用）
TELEGRAM_PROXY=

# --- 飞书（需要 openakita[feishu]）---
FEISHU_ENABLED=false
FEISHU_APP_ID=
FEISHU_APP_SECRET=

# --- 企业微信（需要 openakita[wework]）---
# 注意: 企业微信回调需要公网可访问的 URL (可用 ngrok/frp/cpolar 内网穿透)
WEWORK_ENABLED=false
WEWORK_CORP_ID=
WEWORK_AGENT_ID=
WEWORK_SECRET=
# 回调加解密配置（在企业微信后台"接收消息"设置中获取）
# WEWORK_TOKEN=
# WEWORK_ENCODING_AES_KEY=
# WEWORK_CALLBACK_PORT=9880

# --- 钉钉（需要 openakita[dingtalk]）---
# 使用 Stream 模式，无需公网 IP
DINGTALK_ENABLED=false
DINGTALK_CLIENT_ID=
DINGTALK_CLIENT_SECRET=

# --- QQ（需要 openakita[qq] + NapCat/Lagrange）---
# 连接本地 OneBot 服务器，无需公网 IP
QQ_ENABLED=false
QQ_ONEBOT_URL=ws://127.0.0.1:8080

# ========== 记忆系统（可选） ==========
EMBEDDING_MODEL=shibing624/text2vec-base-chinese
EMBEDDING_DEVICE=cpu
MEMORY_HISTORY_DAYS=30
MEMORY_MAX_HISTORY_FILES=1000
MEMORY_MAX_HISTORY_SIZE_MB=500

# ========== 调度器（默认启用，推荐） ==========
SCHEDULER_ENABLED=true
SCHEDULER_TIMEZONE=Asia/Shanghai
SCHEDULER_MAX_CONCURRENT=5
SCHEDULER_TASK_TIMEOUT=600

# ========== 会话（可选） ==========
SESSION_TIMEOUT_MINUTES=30
SESSION_MAX_HISTORY=50
# SESSION_STORAGE_PATH=data/sessions

# ========== 多 Agent 协同（可选） ==========
ORCHESTRATION_ENABLED=false
ORCHESTRATION_BUS_ADDRESS=tcp://127.0.0.1:5555
ORCHESTRATION_PUB_ADDRESS=tcp://127.0.0.1:5556
ORCHESTRATION_MIN_WORKERS=1
ORCHESTRATION_MAX_WORKERS=5
ORCHESTRATION_HEARTBEAT_INTERVAL=5
ORCHESTRATION_HEALTH_CHECK_INTERVAL=10

# ========== MCP（可选） ==========
# 仅当你启用 MCP 工具链时需要配置
# MCP_ENABLED=false
# MCP_TIMEOUT=30
# MCP_BROWSER_ENABLED=false
#
# MySQL MCP（可选）
# MCP_MYSQL_ENABLED=false
# MCP_MYSQL_HOST=127.0.0.1
# MCP_MYSQL_USER=root
# MCP_MYSQL_PASSWORD=
# MCP_MYSQL_DATABASE=
#
# Postgres MCP（可选）
# MCP_POSTGRES_ENABLED=false
# MCP_POSTGRES_URL=postgresql://user:pass@host:5432/dbname

# ========== 桌面自动化（Windows，可选） ==========
# DESKTOP_ENABLED=false
# DESKTOP_DEFAULT_MONITOR=0
# DESKTOP_COMPRESSION_QUALITY=70
# DESKTOP_MAX_WIDTH=1400
# DESKTOP_MAX_HEIGHT=900
# DESKTOP_CACHE_TTL=2
# DESKTOP_UIA_TIMEOUT=15
# DESKTOP_UIA_RETRY_INTERVAL=0.3
# DESKTOP_UIA_MAX_RETRIES=2
# DESKTOP_VISION_ENABLED=true
# DESKTOP_VISION_MODEL=
# DESKTOP_VISION_FALLBACK_MODEL=
# DESKTOP_VISION_OCR_MODEL=
# DESKTOP_VISION_MAX_RETRIES=1
# DESKTOP_VISION_TIMEOUT=20
# DESKTOP_CLICK_DELAY=0.05
# DESKTOP_TYPE_INTERVAL=0.01
# DESKTOP_MOVE_DURATION=0.12
# DESKTOP_FAILSAFE=true
# DESKTOP_PAUSE=0
# DESKTOP_LOG_ACTIONS=false
# DESKTOP_LOG_SCREENSHOTS=false
# DESKTOP_LOG_DIR=logs/desktop

# ========== OpenAI 兼容 / Browser-use（可选） ==========
# OPENAI_API_BASE=
# OPENAI_BASE_URL=
# OPENAI_API_KEY=
# OPENAI_API_KEY_BASE64=
# BROWSER_USE_API_KEY=

